I want to implement the COMPLETE API Credential Master with flexible authentication types and a Settings (gear) icon for navigation. Please follow ALL the steps carefully and fully implement everything described.

────────────────────────────────────────
1) UPDATE / CREATE DATA MODEL (ApiCredential)
────────────────────────────────────────

In `lib/apiCredentialsStore.ts`, create or update the following TypeScript type:

export type ApiCredential = {
  id: string;
  userId: string; // default “admin” right now

  serviceType:
    | 'DATAFORSEO'
    | 'SEO_SERP'
    | 'OPENAI'
    | 'GEMINI'
    | 'GROK'
    | 'GSC'
    | 'CUSTOM';

  authType: 'USERNAME_PASSWORD' | 'API_KEY' | 'OAUTH' | 'CUSTOM';

  // For DataForSEO (username + password)
  username?: string;        // masked version only
  passwordMasked?: string;  // masked version only

  // For API Key–based services
  apiKeyMasked?: string;

  // For future OAuth or JSON configs
  customConfig?: string;

  label: string;            // human-friendly name
  clientCode?: string;      // optional (credential may be per-client)
  notes?: string;

  isActive: boolean;
  createdAt: string;
  updatedAt: string;
};

IMPORTANT:
- Do NOT store real API keys or real passwords in JSON.
- Only masked versions (e.g., “sk-****abcd”).
- Real secrets will be stored in Replit Secrets later.

────────────────────────────────────────
2) STORAGE IMPLEMENTATION (JSON)
────────────────────────────────────────

Create file:
  data/api_credentials.json

Update helper functions in `lib/apiCredentialsStore.ts`:

- getApiCredentials()
- saveApiCredentials(rows)
- addApiCredential(cred)
- updateApiCredential(cred)
- toggleApiCredentialActive(id)
- deleteApiCredential(id)
- getActiveCredentialByService(serviceType, clientCode?)

These functions must handle:
- multiple auth types
- masking rules
- correct createdAt / updatedAt timestamps
- selecting the correct active credential for a service

────────────────────────────────────────
3) API ROUTES (CRUD ENDPOINTS)
────────────────────────────────────────

Create routes under `/api/api-credentials`:

POST /api/api-credentials/add
POST /api/api-credentials/update
POST /api/api-credentials/delete
POST /api/api-credentials/toggle-active
GET  /api/api-credentials/list

Backend logic must validate:
- If authType = USERNAME_PASSWORD → username + passwordMasked required
- If authType = API_KEY → apiKeyMasked required

────────────────────────────────────────
4) SETTINGS PAGE: `/settings/api-credentials`
────────────────────────────────────────

Create a full and clean UI, divided into **three visual boxes/sections**:

A) BOX 1 — DataForSEO Credentials  
----------------------------------
- serviceType must be DATAFORSEO  
- authType = USERNAME_PASSWORD  
- Show fields:
  • Label  
  • Username (masked)  
  • Password (masked)  
  • Client Code (optional)  
  • Notes  
  • Active toggle  
  • Edit / Delete buttons  

Provide button:
  “Add DataForSEO Credential”

Modal for add/edit should show proper fields for username/password.

B) BOX 2 — API Key–Based Credentials  
-------------------------------------
Used for:
- OPENAI
- SEO_SERP
- GEMINI
- GROK
- CUSTOM_API

Fields:
  • Label  
  • Service Type dropdown  
  • authType = API_KEY  
  • Masked API Key input  
  • Client Code (optional)  
  • Notes  
  • Active toggle  
  • Edit / Delete buttons  

Provide button:
  “Add API Key Credential”

C) BOX 3 — Custom / GSC Credentials  
-------------------------------------
For AUTH TYPE = CUSTOM or JSON config:

Fields:
  • Label  
  • Service Type (GSC or CUSTOM)  
  • customConfig field (textarea, masked preview)  
  • Notes  
  • Active toggle  
  • Edit / Delete buttons  

Provide button:
  “Add Custom Credential”

────────────────────────────────────────
5) UI / UX REQUIREMENTS
────────────────────────────────────────

For all credential tables:
- text-xs  
- tight spacing: py-1 px-2  
- sticky header  
- overflow-x-auto for horizontal scroll  
- badges for serviceType  
- masked display for sensitive fields  
- Edit modal and Delete confirmation  
- Active toggle switch  

────────────────────────────────────────
6) NAVIGATION UPDATE — GEAR ICON
────────────────────────────────────────

Modify the top navbar:

- REMOVE any existing “Settings” or “API Credentials” text links.
- ADD a **gear icon (⚙️)** on the far right of the navbar.
- Clicking the icon should navigate to `/settings/api-credentials`.
- Style:
  - text-gray-600 hover:text-gray-900
  - ml-auto to push it right
  - cursor-pointer
- Add tooltip: “API & Credential Settings”

────────────────────────────────────────
7) INTEGRATION REQUIREMENT
────────────────────────────────────────

Ensure the helper:

getActiveCredentialByService('DATAFORSEO')

returns the correct active credential with:
- serviceType = DATAFORSEO
- authType = USERNAME_PASSWORD
- isActive = true

This will be used by the Keyword API Data refresh logic.

────────────────────────────────────────
8) CLEANUP & FINAL CHECK
────────────────────────────────────────

Ensure:
- All CRUD actions work (Add / Edit / Delete / Toggle Active)
- JSON file updates correctly
- All UI boxes render properly
- Gear icon navigation works
- Page builds and runs with no errors

At the end, list the modified/created files.
